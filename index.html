<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Bartending2U</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <header class="top-bar">
        <div class="top-bar__inner">
            <div class="brand">
                <img src="IMG_9047.png" alt="Bartending2U company logo" />
                <div class="brand__text">
                    <span class="brand__subtitle">Bartending2U</span>
                    <span class="brand__title">Scheduling Suite</span>
                </div>
            </div>

            <button
                class="mobile-nav-toggle"
                id="mobileNavToggle"
                type="button"
                aria-label="Toggle navigation"
                aria-expanded="false"
                data-mobile-nav-toggle
            >
                <span class="mobile-nav-toggle__icon" aria-hidden="true">☰</span>
                <span class="sr-only">Toggle navigation</span>
            </button>

            <nav class="nav-links" id="primaryNav">
                <a class="nav-link active" href="index.html">Dashboard</a>
                <a class="nav-link" href="events.html">Events</a>
                <a class="nav-link" href="leads.html">Leads</a>
                <a class="nav-link" href="employees.html">Employees</a>
                <a class="nav-link" href="calendar.html">Calendar</a>
                <a class="nav-link" href="settings.html">Settings</a>
            </nav>

            <a class="cta-button" href="events.html">+ New Event</a>
        </div>
    </header>

    <main class="page-content">
        <section class="page-header">
            <div>
                <p class="page-eyebrow">Dashboard</p>
                <h1 class="page-title">Welcome back, John Garcia!</h1>
                <p class="lead-text">Stay ahead of every tasting, private party, and corporate gathering with a real-time pulse on staffing and logistics.</p>
            </div>
            <div class="hero-actions">
                <a class="button primary" href="events.html">Schedule an Event</a>
                <a class="button ghost" href="leads.html">Create a new lead</a>
                <a class="secondary-link" href="calendar.html">Open calendar overview →</a>
            </div>
        </section>

        <section id="dashboard-stats" class="card-grid stats-grid" data-subsection="At-a-glance">
            <article class="stat-card">
                <span class="stat-card__label">Total events</span>
                <span class="stat-card__value" id="totalEventsStat">0</span>
                <span class="stat-card__meta success">+2 vs last week</span>
            </article>
            <article class="stat-card">
                <span class="stat-card__label">Team availability</span>
                <span class="stat-card__value" id="teamAvailabilityStat">0 / 0</span>
                <span class="stat-card__meta warning">Live availability updates</span>
            </article>
            <article class="stat-card">
                <span class="stat-card__label">Next event</span>
                <span class="stat-card__value" id="nextEventName" style="font-size:1.6rem;">No events scheduled</span>
                <span class="stat-card__meta" id="nextEventMeta">Add an event to build your schedule.</span>
            </article>
            <article class="stat-card stat-card--interactive">
                <span class="stat-card__label">Action needed</span>
                <button
                    type="button"
                    class="stat-card__action"
                    id="actionNeededTrigger"
                    data-action-needed-trigger
                    aria-haspopup="dialog"
                    aria-controls="actionNeededDrawer"
                >
                    <span class="stat-card__value" id="actionNeededStat">0</span>
                    <span class="stat-card__meta danger" id="actionNeededMeta">Unassigned shifts</span>
                </button>
            </article>
        </section>

        <section id="scheduler-workspace" class="split-layout" data-subsection="Scheduling workspace">
            <article class="content-card" id="dashboard-calendar" data-calendar-root>
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Scheduling calendar</h2>
                        <p class="card-subtitle">See event coverage and lead target dates in a single monthly grid.</p>
                    </div>
                </div>
                <div class="calendar-layout">
                    <div class="calendar-month">
                        <div class="calendar-controls" aria-controls="dashboardCalendarGrid">
                            <button class="calendar-controls__button" type="button" data-calendar-nav="prev" aria-label="Previous month">‹</button>
                            <div class="calendar-controls__label">
                                <span
                                    class="calendar-controls__heading"
                                    id="dashboardCalendarControlsLabel"
                                    data-calendar-heading
                                    data-calendar-controls-label
                                ></span>
                                <button class="calendar-controls__link" type="button" data-calendar-nav="today">Jump to today</button>
                            </div>
                            <button class="calendar-controls__button" type="button" data-calendar-nav="next" aria-label="Next month">›</button>
                        </div>
                        <div class="calendar-weekdays" aria-hidden="true">
                            <span>Sun</span>
                            <span>Mon</span>
                            <span>Tue</span>
                            <span>Wed</span>
                            <span>Thu</span>
                            <span>Fri</span>
                            <span>Sat</span>
                        </div>
                        <div
                            class="calendar-grid"
                            id="dashboardCalendarGrid"
                            role="grid"
                            aria-labelledby="dashboardCalendarControlsLabel"
                            data-calendar-grid
                        ></div>
                    </div>
                    <aside class="calendar-detail" aria-live="polite">
                        <h3 class="calendar-detail__title" id="dashboardCalendarSelectedHeading" data-calendar-selected-heading>Today</h3>
                        <p class="calendar-detail__subtitle" id="dashboardCalendarSelectedSummary" data-calendar-selected-summary>No events yet.</p>
                        <div class="calendar-detail__list" id="dashboardCalendarDayList" data-calendar-day-list></div>
                    </aside>
                </div>
            </article>

            <article id="lead-pipeline" class="content-card" data-subsection="Lead pipeline">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Lead pipeline</h2>
                        <p class="card-subtitle">Track discovery calls, deposits, and bookings in real time.</p>
                    </div>
                    <div class="card-actions">
                        <span class="badge info">Warm leads</span>
                        <a class="card-action" href="#lead-pipeline" data-lead-modal-trigger>Add lead</a>
                    </div>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Lead</th>
                                <th>Event type</th>
                                <th>Ideal date</th>
                                <th>Estimated value</th>
                                <th>Status</th>
                                <th>Next touchpoint</th>
                            </tr>
                        </thead>
                        <tbody id="leadPipelineTableBody"></tbody>
                    </table>
                </div>
            </article>
        </section>

        <section class="split-layout">
            <article id="recent-activity" class="content-card" data-subsection="Recent activity">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Recent activity</h2>
                        <p class="card-subtitle">A running feed of updates across events, staffing, and client requests.</p>
                    </div>
                    <a class="card-action" href="events.html">View all activity →</a>
                </div>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-item__left">
                            <span class="timeline-icon">✅</span>
                            <div>
                                <h3 class="person-card__name">Wedding Reception booked</h3>
                                <p class="card-subtitle">Oct 15 · The Grand Hall · Deposit received</p>
                            </div>
                        </div>
                        <span class="timeline-item__meta">2 minutes ago</span>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-item__left">
                            <span class="timeline-icon">👤</span>
                            <div>
                                <h3 class="person-card__name">John Garcia assigned</h3>
                                <p class="card-subtitle">Corporate Party · Bar Lead confirmed</p>
                            </div>
                        </div>
                        <span class="timeline-item__meta">1 hour ago</span>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-item__left">
                            <span class="timeline-icon">📝</span>
                            <div>
                                <h3 class="person-card__name">Availability updated</h3>
                                <p class="card-subtitle">Jane Smith marked unavailable on Nov 1</p>
                            </div>
                        </div>
                        <span class="timeline-item__meta">4 hours ago</span>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-item__left">
                            <span class="timeline-icon">📦</span>
                            <div>
                                <h3 class="person-card__name">Inventory check</h3>
                                <p class="card-subtitle">Glassware restocked · Ready for tasting events</p>
                            </div>
                        </div>
                        <span class="timeline-item__meta">Yesterday</span>
                    </div>
                </div>
                <div class="timeline" id="activityFeed"></div>
            </article>

            <article id="critical-alerts" class="content-card" data-subsection="Critical alerts">
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Critical alerts</h2>
                        <p class="card-subtitle">Proactively resolve staffing risks before they impact guests.</p>
                    </div>
                </div>
                <div class="accordion">
                    <div class="accordion-item">
                        <button class="accordion-trigger" data-accordion-target="alert-1" aria-expanded="true">
                            <span><span class="badge danger">3 shifts</span> Pending staffing</span>
                            <span aria-hidden="true">⌄</span>
                        </button>
                        <div class="accordion-content" id="alert-1" data-open="true">
                            <div class="accordion-content__inner">
                                <ul id="staffingAlertsList" class="alert-list"></ul>
                                <a class="card-action" href="employees.html">Review available team →</a>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <button class="accordion-trigger" data-accordion-target="alert-2" aria-expanded="false">
                            <span><span class="badge warning">1 client</span> Awaiting confirmation</span>
                            <span aria-hidden="true">⌄</span>
                        </button>
                        <div class="accordion-content" id="alert-2">
                            <div class="accordion-content__inner">
                                <p>The Rivera tasting proposal expires tomorrow. Send the updated signature package to secure the booking.</p>
                                <a class="card-action" href="events.html">Open proposals dashboard →</a>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <button class="accordion-trigger" data-accordion-target="alert-3" aria-expanded="false">
                            <span><span class="badge success">Supplies</span> Ready for pickup</span>
                            <span aria-hidden="true">⌄</span>
                        </button>
                        <div class="accordion-content" id="alert-3">
                            <div class="accordion-content__inner">
                                <p>Craft syrups prepared for Saturday. Coordinate pickup during Friday load-out.</p>
                                <a class="card-action" href="settings.html">Adjust prep reminders →</a>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
        </section>

        <section class="content-card">
            <div class="card-header">
                <div>
                    <h2 class="card-title">This week’s events</h2>
                    <p class="card-subtitle">A focused look at upcoming commitments and staffing readiness.</p>
                </div>
                <a class="card-action" href="calendar.html">View full calendar →</a>
            </div>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th>Event</th>
                            <th>Date</th>
                            <th>Location</th>
                            <th>Team</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-label="Event">Corporate Party</td>
                            <td data-label="Date">Oct 5, 2025 · 7:00 PM</td>
                            <td data-label="Location">Downtown Houston</td>
                            <td data-label="Team">John D., Alex R.</td>
                            <td data-label="Status"><span class="badge success">Ready</span></td>
                            <td class="table-actions" data-label="Actions">
                                <a class="card-action" href="events.html">View details</a>
                            </td>
                        </tr>
                        <tr>
                            <td data-label="Event">Wedding Reception</td>
                            <td data-label="Date">Oct 15, 2025 · 6:00 PM</td>
                            <td data-label="Location">The Grand Hall</td>
                            <td data-label="Team">Pending assignments</td>
                            <td data-label="Status"><span class="badge warning">Needs staffing</span></td>
                            <td class="table-actions" data-label="Actions">
                                <a class="card-action" href="employees.html">Assign team</a>
                            </td>
                        </tr>
                        <tr>
                            <td data-label="Event">Mixology Workshop</td>
                            <td data-label="Date">Oct 18, 2025 · 5:30 PM</td>
                            <td data-label="Location">Private Residence</td>
                            <td data-label="Team">Jamie L., Priya S.</td>
                            <td data-label="Status"><span class="badge success">Confirmed</span></td>
                            <td class="table-actions" data-label="Actions">
                                <a class="card-action" href="events.html">Manage</a>
                            </td>
                        </tr>
                    </tbody>
                    <tbody id="dashboardEventsTable"></tbody>
                </table>
            </div>
        </section>
        <div class="action-needed-overlay" id="actionNeededOverlay" hidden></div>
        <aside
            class="action-needed-drawer"
            id="actionNeededDrawer"
            role="dialog"
            aria-modal="true"
            aria-hidden="true"
            aria-labelledby="actionNeededTitle"
        >
            <div class="action-needed-drawer__header">
                <h2 class="action-needed-drawer__title" id="actionNeededTitle">Shifts needing staffing</h2>
                <button type="button" class="icon-button" data-action-needed-close aria-label="Close action needed panel">
                    ✕
                </button>
            </div>
            <div class="action-needed-drawer__body">
                <p class="action-needed-drawer__intro">
                    Review events that still need staffing coverage and quickly assign available team members.
                </p>
                <div id="actionNeededFeedback" class="action-needed-drawer__feedback" role="status" aria-live="polite"></div>
                <div id="actionNeededEmpty" class="action-needed-empty-state" hidden>
                    All events are fully staffed. Great job!
                </div>
                <div id="actionNeededList" class="action-needed-list"></div>
            </div>
        </aside>
    </main>

    <div id="leadModal" class="modal" hidden>
        <div class="modal__backdrop" data-lead-modal-dismiss></div>
        <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="leadModalTitle">
            <button class="modal__close" type="button" aria-label="Close" data-lead-modal-dismiss>&times;</button>
            <div class="modal__header">
                <h3 class="modal__title" id="leadModalTitle"></h3>
                <p class="modal__subtitle" id="leadModalSubtitle"></p>
            </div>
            <div class="modal__content" id="leadModalContent"></div>
        </div>
    </div>

    <footer class="app-footer">© 2025 Bartending2U. Crafted for seamless event coordination.</footer>

    <script src="storage.js"></script>
    <script src="leads.js"></script>
    <script src="calendar.js"></script>
    <script src="ui.js"></script>
    <script src="app.js"></script>
</body>
</html>
